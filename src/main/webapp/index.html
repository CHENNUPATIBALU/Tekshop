<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>TekShop</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <style>
    	*{
		    margin: 0;
		}
		
		body{
		    background-color: rgb(241, 244, 246);
		}
		
		#top-div{
		    width: 100%;
		    text-align: center;
		}
		
		#search-div{
		    display: inline-block;
		}
		
		input[type=search]{
		    width: 250px;
		    height: 40px;
		    border-radius: 5px;
		    border: 0.5px solid gainsboro;
		    box-shadow: 1px 1px 1px grey;
		}
		
		#search-btn{
		    padding: 10px;
		    border-radius: 5px;
		    border: none;
		    box-shadow: 1px 1px 1px blueviolet;
		    background-color: blueviolet;
		}
		
		#search-btn i{
		    color: white;
		}
		
		#top-div h1{
		    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
		    font-style: oblique;
		    color: brown;
		}
		
		.root-div{
		    display: none;
		}
		
		#products-div{
		    margin: 5px;
		    flex-wrap: wrap;
		    display: flex;
		}
		
		#sort-filter-div{
		    width: max-content;
		    margin: 5px;
		    padding: 10px;
		    border-radius: 5px;
		    box-shadow: 0.5px 1px 1px 1.32px grey;
		    border: none;
		}
		
		input[type=range]{
		    width: 100%;
		}
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
    <div id="top-div">
        <h1>TekShop</h1>
        <div id="search-div">
            <input list="products-list" type="search" placeholder="Search" id="search-input">
            <datalist id="products-list"></datalist>
            <button id="search-btn"><i class="fa fa-search"></i></button>
        </div>
    </div>
    <div class="root-div" id="root-div">
        <div id="sort-filter-div">
            <div>
                <p>Price range</p>
                <input type="range" id="price-range">
                <p></p>
            </div>
            <div>
                <p><b>Category:</b></p>
                <div>
                    <input type="checkbox"><span>Apparels & Accessories</span><br>
                    <input type="checkbox"><span>Style & Fashion</span><br>
                    <input type="checkbox"><span>Home & Garden</span>
                    <br>
                    <input type="checkbox"><span>Sporting Goods</span>
                    <br>
                    <input type="checkbox"><span>Health & Wellness</span>
                    <br>
                    <input type="checkbox"><span>Children & Infants</span>
                    <br>
                    <input type="checkbox"><span>Groceries, Food and Drinks</span>
                    <br>
                    <input type="checkbox"><span>Flowers and Gifts</span>
                </div>
            </div>
        </div>
        <div id="products-div">
            
        </div>
    </div>
</body>
<script>
	populateProducts();
	
	document.getElementById("price-range").addEventListener('change',function(){
	    filterProducts("price");
	});
	
	document.getElementById("search-btn").addEventListener('click',function(){
	    var searchInput = document.getElementById('search-input').value;
	    if(searchInput.length>0){
	        searchProduct(searchInput);
	    }
	});
	
	function populateProducts(){
	    products = getProducts();
	    if(products.length>0){
	        document.getElementById("root-div").style.display = "flex";
	        for(let i=0;i<products.length;i++){
	            product = JSON.parse(products[i]);
	            var option = document.createElement('option');
	            option.value = product.Product_Name;
	            document.getElementById("products-list").appendChild(option);
	            populateProduct(product.Category,product.Product_Name,product.Unit_Price,product.Active_Flag);
	        }
	    }
	}
	
	function populateProduct(category,prod_name,prod_price,active){
	    if(active=="Yes"){
	        var div = document.createElement('div');
	        div.style = "border: 0.1px solid rgb(230, 206, 206); border-radius:5px; width: max-content; margin: 5px; padding: 10px; background-color:white;";
	
	        var img = document.createElement('img');
	        img.src = getProductImage(category);
	        img.style = "width:200px; margin:0 auto; display:block;";
	        img.alt = prod_name+"_img";
	
	        var p = document.createElement('p');
	        var b = document.createElement('b');
	
	        p.appendChild(b);
	        b.innerText = prod_name;
	        b.style.fontFamily = "'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', sans-serif";
	        b.style.fontSize = "large";
	        p.style.textAlign = "center";
	
	        var p1 = document.createElement('p');
	        var b1 = document.createElement('b');
	        b1.innerText = "Price: ";
	        b1.style.fontFamily = "Lucida Sans, 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif";
	        p1.appendChild(b1);
	        var span = document.createElement('span');
	        span.innerText = "â‚¹ "+prod_price+"/-";
	        span.style.fontSize = "20px";
	        span.style.color = "green";
	        span.style.fontFamily = "Arial, Helvetica, sans-serif";
	        span.style.fontStyle = "italic";
	        p1.appendChild(span);
	
	        var div1 = document.createElement('div');
	        div1.style = "width: max-content; margin: 0 auto; display: block;";
	
	        var view_details_btn = document.createElement('button');
	        var view_details_icon = document.createElement('i');
	        view_details_icon.classList.add("fa");
	        view_details_icon.classList.add("fa-info-circle");
	        view_details_icon.style.fontSize = "large";
	
	        view_details_btn.innerText = "View details ";
	
	        view_details_btn.appendChild(view_details_icon);
	        view_details_btn.style.margin = "5px";
	        view_details_btn.style.cursor = "pointer";
	
	        var purchase_btn = document.createElement('button');
	        var purchase_icon = document.createElement('i');
	        purchase_icon.classList.add("fa");
	        purchase_icon.classList.add("fa-shopping-bag");
	        purchase_icon.style.fontSize = "large";
	        purchase_btn.innerText = "Purchase ";
	
	        purchase_btn.appendChild(purchase_icon);
	        purchase_btn.style.cursor = "pointer";
	
	        div1.appendChild(view_details_btn);
	        div1.appendChild(purchase_btn);
	
	        div.appendChild(img);
	        div.appendChild(p);
	        div.appendChild(p1);
	        div.appendChild(div1);
	
	        view_details_btn.addEventListener('click',function(){
	            window.open("view-product-details.html?product="+prod_name+"&category="+category,"_blank","width:200px,height:200px");
	        });
	
	        purchase_btn.addEventListener('click',function(){
	
	        });
	
	        document.getElementById("products-div").appendChild(div);
	    }
	}
	
	function getProductImage(category){
	    imagePath = "";
	    switch (category) {
	        case "Apparels & Accessories":
	            imagePath = "./Images/apparels-accessories.jpg";
	            break;
	        case "Style & Fashion":
	            imagePath = "./Images/style-fashion.jpg";
	            break;
	        case "Home & Garden":
	            imagePath = "./Images/home-garden.jpg";
	            break;
	        case "Sporting Goods":
	            imagePath = "./Images/sport-goods.jpg";
	            break;
	        case "Health & Wellness":
	            imagePath = "./Images/health-wellness.png";
	            break;
	        case "Children & Infants":
	            imagePath = "./Images/children-infant.png";
	            break;
	        case "Groceries, Food and Drinks":
	            imagePath = "./Images/groceries.jpg";
	            break;
	        case "Flowers and Gifts":
	            imagePath = "./Images/flower-gift.jpg";
	            break;
	        default:
	            break;
	    }
	    return imagePath;
	}
	
	function filterProducts(filter){
	    switch (filter) {
	        case "price":
	            filterByPrice(document.getElementById("price-range").value);
	            break;
	    
	        default:
	            break;
	    }
	}
	
	function filterByPrice(price){
	    var productsDiv = document.getElementById("products-div");
	    productsDiv.innerHTML = "";
	
	    var products = getProducts();
	
	    if(products.length>0){
	        for(let i=0;i<products.length;i++){
	            var product = JSON.parse(products[i]);
	            if(product.Unit_Price<=price){
	                populateProduct(product.Category,product.Product_Name,product.Unit_Price,product.Active_Flag);
	            }
	        }
	    }
	}
	
	function filterByCategory(){
	
	}
	
	function searchProduct(search){
	    var productsDiv = document.getElementById("products-div");
	    productsDiv.innerHTML = "";
	
	    var products = getProducts();
	
	    if(products.length>0){
	        for(let i=0;i<products.length;i++){
	            var product = JSON.parse(products[i]);
	            if(product.Product_Name==search){
	                populateProduct(product.Category,product.Product_Name,product.Unit_Price,product.Active_Flag);
	            }
	        }
	    }
	}
</script>
</html>